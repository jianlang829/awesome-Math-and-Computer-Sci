
## 版本0到版本1的改进：

将搜索区间从固定的 `[y0-100, y0+100]` 改为基于上一步结果的动态区间 `[ys[i-1]*0.5, ys[i-1]*1.5]`，并将区间定义放入循环，能显著提升算法的精确度和速度，核心原因如下：


### **1. 精度提升：减少假根，聚焦真实解邻域**
- **缩小搜索范围，降低多解干扰**：  
  原固定区间 `[y0±100]` 可能包含多个满足 `F(y)=G(x)` 的点（尤其是当 `F(y)` 非单调时，如震荡函数），导致 `brentq` 误判假根。而动态区间以上一步的解 `ys[i-1]` 为基准，仅在其附近的小范围（0.5~1.5倍）搜索，大幅减少了假根存在的可能性。
  
- **适配解的局部连续性**：  
  微分方程的解通常具有局部连续性（相邻 `x` 对应的 `y` 变化平滑），尤其是当 `x` 采样间隔较小时，`ys[i]` 与 `ys[i-1]` 差异不会太大。动态区间贴合这种连续性，确保搜索范围集中在真实解的邻域，提高求根准确性。

- **避免“累积误差爆炸”**：  
  若初始固定区间找到的解偏离真实值，后续步骤会基于错误值继续计算，误差会累积放大。动态区间通过“上一步正确解约束下一步范围”，形成反馈校正机制，抑制误差累积。


### **2. 速度提升：减少无效计算，优化搜索效率**
- **减少采样和求根的计算量**：  
  原固定区间范围大（如±100），采样点数 `N_samples=400` 需覆盖整个宽区间，导致大量无效采样（远离真实解的区域）。动态区间范围小（仅上一步解的0.5~1.5倍），相同采样点数下，对真实解邻域的采样密度更高，且无需在无关区域浪费计算资源。
  
- **降低 `brentq` 迭代次数**：  
  `brentq` 求根效率与初始区间大小正相关：区间越小，迭代收敛越快。动态区间从一开始就聚焦于真实解附近，大幅减少 `brentq` 所需的迭代步数，尤其在解变化平缓的区域效果显著。

- **减少扩展区间的重试次数**：  
  原固定区间若未找到解，需多次扩展（如扩大2倍，最多3次），每次扩展都要重新采样和搜索，耗时巨大。动态区间因贴合解的趋势，极少需要扩展，甚至无需扩展即可找到有效区间，节省了扩展逻辑的计算成本。


### **3. 鲁棒性增强：适配解的动态变化趋势**
- **适应解的增长/衰减特性**：  
  例如，对于指数增长的解（如 `dy/dx = x*y`），`ys[i]` 会随 `x` 快速增大，固定区间 `[y0±100]` 很快会失效（解超出范围），而动态区间 `[ys[i-1]*0.5, ys[i-1]*1.5]` 会随解同步扩大，始终覆盖真实解。
  
- **自动调整区间尺度**：  
  当解较小时（如初始阶段 `y≈y0`），区间范围较小（如 `y0*0.5` 到 `y0*1.5`），避免过度搜索；当解增大后，区间会按比例自动扩展，无需人工调整尺度参数，适配不同量级的解。


### **总结**
动态区间通过**“局部连续性约束”**和**“自适应尺度调整”**，既保证了搜索范围始终聚焦于真实解邻域（提升精度），又减少了无效计算和迭代次数（提升速度），同时对解的各种变化趋势（增长、衰减、平缓）具有更强的适应性，是数值求根问题中优化效率和精度的经典策略。